# ç”µå•†æ¨èç³»ç»Ÿ - Flask Web å‰ç«¯

åŸºäº Flask çš„ç”µå•†æ¨èç³»ç»Ÿ Web ç•Œé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

- **ğŸ“Š å¯è§†åŒ–æ•°æ®æŸ¥è¯¢**: æ•°æ®ç»Ÿè®¡ã€è½¬åŒ–æ¼æ–—ã€çƒ­é—¨å•†å“ç­‰å¯è§†åŒ–åˆ†æ
- **ğŸ§  æ¨¡å‹å­¦ä¹ **: è§¦å‘ ALS æ¨¡å‹è®­ç»ƒã€æŸ¥çœ‹è®­ç»ƒçŠ¶æ€å’Œæ—¥å¿—
- **ğŸ¯ æ¨èç»“æœæ˜¾ç¤º**: ä¸ªæ€§åŒ–å•†å“æ¨èã€ç”¨æˆ·ç”»åƒå±•ç¤º
- **ğŸ’¾ ç»“æœä¿å­˜**: æ¨èç»“æœå¯¼å‡ºä¸º JSON æ–‡ä»¶

## å¿«é€Ÿå¯åŠ¨

```bash
cd webapp

# æ–¹å¼1: ä½¿ç”¨å¯åŠ¨è„šæœ¬
chmod +x start.sh
./start.sh

# æ–¹å¼2: æ‰‹åŠ¨å¯åŠ¨
export FLASK_APP=run.py
export FLASK_ENV=development
python run.py
```

è®¿é—® http://localhost:5000

## é¡¹ç›®ç»“æ„

```
webapp/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py          # Flask åº”ç”¨å·¥å‚
â”‚   â”œâ”€â”€ config.py            # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ routes/              # è·¯ç”±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ main.py          # ä¸»é¡µè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ recommend.py     # æ¨èè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ analysis.py      # åˆ†æè·¯ç”±
â”‚   â”‚   â””â”€â”€ model.py         # æ¨¡å‹è·¯ç”±
â”‚   â”œâ”€â”€ services/            # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py      # Spark æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ recommend_service.py
â”‚   â”‚   â”œâ”€â”€ user_service.py
â”‚   â”‚   â”œâ”€â”€ analysis_service.py
â”‚   â”‚   â””â”€â”€ model_service.py
â”‚   â”œâ”€â”€ templates/           # Jinja2 æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ base.html
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ recommend.html
â”‚   â”‚   â”œâ”€â”€ analysis.html
â”‚   â”‚   â”œâ”€â”€ model.html
â”‚   â”‚   â””â”€â”€ about.html
â”‚   â””â”€â”€ static/              # é™æ€èµ„æº
â”‚       â”œâ”€â”€ css/
â”‚       â””â”€â”€ js/
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ run.py
â””â”€â”€ start.sh
```

## é¡µé¢è¯´æ˜

| é¡µé¢ | è·¯ç”± | åŠŸèƒ½ |
|------|------|------|
| ç³»ç»Ÿæ¦‚è§ˆ | `/` | ç»Ÿè®¡å¡ç‰‡ã€çƒ­é—¨å•†å“ã€å¿«é€Ÿæ“ä½œ |
| æ¨èæŸ¥è¯¢ | `/recommend/` | ç”¨æˆ·æ¨èã€ç”»åƒå±•ç¤ºã€ç»“æœä¿å­˜ |
| æ•°æ®åˆ†æ | `/analysis/` | è½¬åŒ–æ¼æ–—ã€äº‹ä»¶åˆ†å¸ƒã€ç±»ç›®åˆ†æ |
| æ¨¡å‹ç®¡ç† | `/model/` | æ¨¡å‹è®­ç»ƒã€çŠ¶æ€ç›‘æ§ã€å‚æ•°æŸ¥çœ‹ |

## API æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/recommend/api/recommend/<user_id>` | GET | è·å–ç”¨æˆ·æ¨è |
| `/recommend/api/user/<user_id>` | GET | è·å–ç”¨æˆ·ç”»åƒ |
| `/recommend/api/random-user` | GET | è·å–éšæœºç”¨æˆ· |
| `/analysis/api/stats` | GET | è·å–ç³»ç»Ÿç»Ÿè®¡ |
| `/analysis/api/funnel` | GET | è·å–è½¬åŒ–æ¼æ–— |
| `/model/train` | POST | å¯åŠ¨æ¨¡å‹è®­ç»ƒ |
| `/model/status` | GET | è·å–è®­ç»ƒçŠ¶æ€ |

## ä¾èµ–

- Flask 3.0+
- PySpark 3.x
- Bootstrap 5.3
- ECharts 5.x

## æ³¨æ„äº‹é¡¹

1. å¯åŠ¨å‰ç¡®ä¿ Hadoop/YARN/Hive æœåŠ¡å·²è¿è¡Œ
2. ç¡®ä¿ ALS æ¨¡å‹å·²è®­ç»ƒï¼ˆæˆ–é€šè¿‡ç•Œé¢è®­ç»ƒï¼‰
3. é¦–æ¬¡åŠ è½½å¯èƒ½è¾ƒæ…¢ï¼ˆSpark åˆå§‹åŒ–ï¼‰
